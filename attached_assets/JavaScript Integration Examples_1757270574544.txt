// Fetch leads for CRM
const { data: leads } = await supabase
  .from('leads')
  .select('*')
  .order('created_at', { ascending: false });

// Track analytics event
await supabase
  .from('analytics_events')
  .insert({
    event_type: 'apartment_view',
    apartment_id: 1,
    session_id: sessionId,
    user_info: { source: 'website' }
  });

// Update lead status
await supabase
  .rpc('update_lead_status', {
    p_lead_id: leadId,
    p_new_status: 'qualified',
    p_changed_by: 'Stefan M.'
  });